---
interface Props {
  variant?: 'drawer' | 'page';
}

const { variant = 'drawer' } = Astro.props as Props;
const base = import.meta.env.BASE_URL || '/';
const isDrawer = variant === 'drawer';
---
<section
  class:list={[
    'relative flex h-full flex-col gap-6',
    {
      'max-w-3xl w-full mx-auto rounded-3xl border border-slate-200 bg-white p-6 shadow-xl': variant === 'page'
    }
  ]}
  data-cart-root
  data-cart-variant={variant}
>
  <header class="flex items-center justify-between gap-4">
    <div>
      <p class="text-2xl font-semibold text-primary">Tu carrito</p>
      <p class="text-sm text-slate-500" data-cart-count-text>0 productos</p>
    </div>
    {isDrawer && (
      <button
        type="button"
        class="rounded-full border border-slate-200 p-2 text-slate-500 hover:text-primary"
        data-cart-toggle="close"
        aria-label="Cerrar carrito"
      >
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="h-5 w-5" fill="none">
          <path d="M6 6L18 18M6 18L18 6" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" />
        </svg>
      </button>
    )}
  </header>
  <div class="flex-1" data-cart-scroll>
    <div class="cart-empty-state flex flex-col items-center gap-3 rounded-2xl border border-dashed border-slate-300 bg-slate-50/80 px-6 py-8 text-center" data-cart-empty>
      <p class="text-lg font-semibold text-slate-700">Tu carrito esta vacio</p>
      <p class="text-sm text-slate-500">Agrega calcos desde el catalogo para verlos aca.</p>
      <a href={base} class="rounded-full border border-primary px-5 py-2 text-sm font-semibold text-primary hover:bg-primary hover:text-white">Volver al catalogo</a>
    </div>
    <ul class="cart-items flex flex-1 flex-col gap-4 py-4" data-cart-items></ul>
  </div>
  <div class="space-y-4 rounded-3xl border border-slate-100 bg-slate-50 p-5">
    <div class="flex items-center justify-between text-lg font-semibold text-primary">
      <span>Total</span>
      <span data-cart-total>$0</span>
    </div>
    <div class="space-y-1 text-sm text-slate-600">
      <p><strong>Alias:</strong> ALIAS_EJEMPLO</p>
      <p><strong>CBU:</strong> 0000000000000000000000</p>
      <p>Enviame el comprobante y coordinamos entrega.</p>
    </div>
    <div class="flex flex-col gap-3 sm:flex-row">
      <button
        type="button"
        class="rounded-full border border-slate-300 px-4 py-3 text-sm font-semibold text-slate-600 hover:border-slate-400"
        data-clear-cart
      >
        Vaciar carrito
      </button>
      <a
        data-whatsapp-btn
        target="_blank"
        rel="noopener noreferrer"
        class="rounded-full bg-primary px-4 py-3 text-center text-base font-semibold text-white shadow hover:bg-slate-900 disabled:cursor-not-allowed disabled:bg-slate-300"
      >
        Comprar por WhatsApp
      </a>
    </div>
  </div>
  <div class="md:hidden sticky bottom-0 left-0 right-0 flex items-center justify-between gap-3 rounded-2xl border border-slate-200 bg-white px-5 py-4 shadow-xl" data-cart-bottom>
    <div>
      <p class="text-xs uppercase tracking-widest text-slate-400">Total</p>
      <p class="text-lg font-semibold text-primary" data-cart-bottom-total>$0</p>
    </div>
    <a
      data-whatsapp-btn
      target="_blank"
      rel="noopener noreferrer"
      class="flex-1 rounded-full bg-accent px-4 py-3 text-center text-base font-semibold text-white shadow hover:bg-orange-500 disabled:cursor-not-allowed disabled:bg-slate-300"
    >
      Comprar por WhatsApp
    </a>
  </div>
</section>
